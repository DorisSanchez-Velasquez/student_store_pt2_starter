{"ast":null,"code":"import axios from \"axios\";\n\nclass ApiClient {\n  constructor(remoteHostUrl) {\n    this.remoteHostUrl = remoteHostUrl;\n    this.token = null;\n  }\n\n  setToken(token) {\n    this.token = token;\n  }\n\n  async request(_ref) {\n    let {\n      endpoint,\n      method = 'GET',\n      data = {}\n    } = _ref;\n    const url = `${this.remoteHostUrl}/${endpoint}`;\n    const headers = {\n      \"Content-Type\": \"application/json\"\n    };\n\n    if (this.token) {\n      headers[\"Authorization\"] = `Bearer ${this.token}`;\n    }\n\n    try {\n      const res = await axios({\n        url,\n        method,\n        data,\n        headers\n      });\n      return {\n        data: res.data,\n        error: null\n      };\n    } catch (error) {\n      var _error$response, _error$response$data, _error$response$data$;\n\n      console.log(error);\n      const message = error === null || error === void 0 ? void 0 : (_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : (_error$response$data$ = _error$response$data.error) === null || _error$response$data$ === void 0 ? void 0 : _error$response$data$.message;\n      return {\n        data: null,\n        error: message || String(error)\n      };\n    }\n  }\n\n  async createOrder(order) {\n    return await this.request({\n      endpoint: \"orders\",\n      method: 'POST',\n      data: order\n    });\n  }\n\n  async loginUser(credentials) {\n    return await this.request({\n      endpoint: 'auth/login',\n      method: 'POST',\n      data: credentials\n    });\n  }\n\n  async registerUser(credentials) {\n    return await this.request({\n      endpoint: 'auth/register',\n      method: 'POST',\n      data: credentials\n    });\n  }\n\n}\n\nexport default new ApiClient(process.env.REACT_APP_REMOTE_HOST_URL || \"https://localhost:3001\");","map":{"version":3,"names":["axios","ApiClient","constructor","remoteHostUrl","token","setToken","request","endpoint","method","data","url","headers","res","error","console","log","message","response","String","createOrder","order","loginUser","credentials","registerUser","process","env","REACT_APP_REMOTE_HOST_URL"],"sources":["C:/Users/doris/student_store_pt2_starter/student-store-ui/src/services/apiClient.js"],"sourcesContent":["import axios from \"axios\"\r\n\r\nclass ApiClient{\r\n    constructor(remoteHostUrl)\r\n    {\r\n        this.remoteHostUrl = remoteHostUrl;\r\n        this.token = null;\r\n    }\r\n\r\n    setToken(token)\r\n    {\r\n        this.token = token\r\n    }\r\n\r\n    async request({endpoint, method = 'GET', data = {}})\r\n    {\r\n        const url = `${this.remoteHostUrl}/${endpoint}`\r\n        const headers = {\r\n            \"Content-Type\": \"application/json\"\r\n        }\r\n\r\n        if(this.token)\r\n        {\r\n            headers[\"Authorization\"] = `Bearer ${this.token}`\r\n        }\r\n\r\n        try{\r\n            const res = await axios({url, method, data, headers})\r\n            return {data: res.data, error: null}\r\n\r\n        }catch(error)\r\n        {\r\n            console.log(error)\r\n            const message = error?.response?.data?.error?.message\r\n            return {data: null, error: message || String(error)}\r\n        }\r\n    }\r\n\r\n    async createOrder(order)\r\n    {\r\n        return await this.request({endpoint: \"orders\", method: 'POST', data: order})\r\n    }\r\n\r\n    async loginUser(credentials)\r\n    {\r\n        return await this.request({endpoint: 'auth/login', method: 'POST', data: credentials})\r\n    }\r\n\r\n    async registerUser(credentials)\r\n    {\r\n        return await this.request({endpoint: 'auth/register', method: 'POST', data: credentials})\r\n    }\r\n}\r\n\r\nexport default new ApiClient(process.env.REACT_APP_REMOTE_HOST_URL || \"https://localhost:3001\")"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;;AAEA,MAAMC,SAAN,CAAe;EACXC,WAAW,CAACC,aAAD,EACX;IACI,KAAKA,aAAL,GAAqBA,aAArB;IACA,KAAKC,KAAL,GAAa,IAAb;EACH;;EAEDC,QAAQ,CAACD,KAAD,EACR;IACI,KAAKA,KAAL,GAAaA,KAAb;EACH;;EAEY,MAAPE,OAAO,OACb;IAAA,IADc;MAACC,QAAD;MAAWC,MAAM,GAAG,KAApB;MAA2BC,IAAI,GAAG;IAAlC,CACd;IACI,MAAMC,GAAG,GAAI,GAAE,KAAKP,aAAc,IAAGI,QAAS,EAA9C;IACA,MAAMI,OAAO,GAAG;MACZ,gBAAgB;IADJ,CAAhB;;IAIA,IAAG,KAAKP,KAAR,EACA;MACIO,OAAO,CAAC,eAAD,CAAP,GAA4B,UAAS,KAAKP,KAAM,EAAhD;IACH;;IAED,IAAG;MACC,MAAMQ,GAAG,GAAG,MAAMZ,KAAK,CAAC;QAACU,GAAD;QAAMF,MAAN;QAAcC,IAAd;QAAoBE;MAApB,CAAD,CAAvB;MACA,OAAO;QAACF,IAAI,EAAEG,GAAG,CAACH,IAAX;QAAiBI,KAAK,EAAE;MAAxB,CAAP;IAEH,CAJD,CAIC,OAAMA,KAAN,EACD;MAAA;;MACIC,OAAO,CAACC,GAAR,CAAYF,KAAZ;MACA,MAAMG,OAAO,GAAGH,KAAH,aAAGA,KAAH,0CAAGA,KAAK,CAAEI,QAAV,4EAAG,gBAAiBR,IAApB,kFAAG,qBAAuBI,KAA1B,0DAAG,sBAA8BG,OAA9C;MACA,OAAO;QAACP,IAAI,EAAE,IAAP;QAAaI,KAAK,EAAEG,OAAO,IAAIE,MAAM,CAACL,KAAD;MAArC,CAAP;IACH;EACJ;;EAEgB,MAAXM,WAAW,CAACC,KAAD,EACjB;IACI,OAAO,MAAM,KAAKd,OAAL,CAAa;MAACC,QAAQ,EAAE,QAAX;MAAqBC,MAAM,EAAE,MAA7B;MAAqCC,IAAI,EAAEW;IAA3C,CAAb,CAAb;EACH;;EAEc,MAATC,SAAS,CAACC,WAAD,EACf;IACI,OAAO,MAAM,KAAKhB,OAAL,CAAa;MAACC,QAAQ,EAAE,YAAX;MAAyBC,MAAM,EAAE,MAAjC;MAAyCC,IAAI,EAAEa;IAA/C,CAAb,CAAb;EACH;;EAEiB,MAAZC,YAAY,CAACD,WAAD,EAClB;IACI,OAAO,MAAM,KAAKhB,OAAL,CAAa;MAACC,QAAQ,EAAE,eAAX;MAA4BC,MAAM,EAAE,MAApC;MAA4CC,IAAI,EAAEa;IAAlD,CAAb,CAAb;EACH;;AAjDU;;AAoDf,eAAe,IAAIrB,SAAJ,CAAcuB,OAAO,CAACC,GAAR,CAAYC,yBAAZ,IAAyC,wBAAvD,CAAf"},"metadata":{},"sourceType":"module"}